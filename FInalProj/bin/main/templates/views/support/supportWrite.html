<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/supportWrite.css">

<title>Document</title>
<style>
	.selectCate{
		font-size:20px;
	}
	
	
input{
/*   height: 30px; */
  width: 180px;
/*   border-radius: 0.5em; */
  padding: 8px 15px 9px;
	border-radius: 4px;
/* 	width: 335px; */
	height: 40px;
	border: 1px solid lightgray;
	outline: none;
}

input:hover{
	border:2px solid #9DC08B;
}

textarea{
/*   height: 30px; */
/*   width: 180px; */
/*   border-radius: 0.5em; */
  padding: 8px 15px 9px;
	border-radius: 4px;
/* 	width: 335px; */
/* 	height: 40px; */
	border: 1px solid lightgray;
	outline: none;
}

textarea:hover{
	border:2px solid #9DC08B;
}




</style>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body>
	<div th:replace="~{../common/header :: header}"></div>

<div>
	<section style="display: flex;">
	<div th:replace="~{../common/sidebar :: sidebar}"></div>

		<section id="supportListSection">

        <div>
            <div id="supportWrite">후원 신청</div>
        </div>

        <div class="path">
            <a class="middle" href="#"><img class="homeIconSize" src="image/home.png"></a>
            <img class="sub iconSize" src="image/onenext.png">
            <a class="middle" href="#">후원 내역</a>
            <img class="sub iconSize" src="image/onenext.png">
            <a class="middle">후원 신청 내역</a>
            <img class="sub iconSize" src="image/onenext.png">
            <a class="middle">후원 신청하기</a>
        </div>


		<div >
			<form id="supportApply" method="post" action="supportApply.su" >
			<table>
	            <tr>
	                <td colspan="2"> 
	                    <div class="subTitle">소개</div>
	                </td>
	            </tr>
	            <tr>
	                <td colspan="2">
	                    <div class="supportContent">카테고리</div>
	                </td>
	            </tr>
	            <tr>
	                <td colspan="2">
	                    <div class="dropdown">
						      <button id="dropbtn" type="button"> 
						        선택
						      </button>
   					          <input type="hidden" name="supportCategory" value="none" id="category">
						      <div class="dropdown-content">
						        <span class="selectCate">사람</span>
						        <span class="selectCate">동물</span>
						        <span class="selectCate">환경</span>
						        <span class="selectCate">기타</span>
						      </div>
					    </div>
	                </td>
	            </tr>
	            <tr>
	                <td colspan="2">
	                    <div class="supportContent">제목</div>
	                </td>
	            </tr>
	            <tr>
	              <td colspan="2">
	                  <div class="supportContent">
	                      <input type="text" name="supportTitle" style="width:100%;">
	                  </div>
	              </td>  
	            </tr>
	            <tr>
	              <td colspan="2">
	                  <div class="supportContent">사진</div>
	              </td>
	            </tr>  
	            <tr>
	                <td colspan="2">
	                  <div class="supportContent">
	                    <input type="file" name="file" class="supportPic">
	                    <span class="plusRoute">    	
		                    <button id="plusInput2" type="button">+</button>
	                    </span>
	                  </div>  
	                </td>
	                <td>
	                
	                </td>
	            </tr>
	            <tr>    
	                <td colspan="2">
	                    <div class="supportContent">
	                        내용
	                    </div>    
	                </td>        
	            </tr>
	            <tr>
	                <td colspan="2">
	                    <div class="supportContent">
	                        <textarea name="supportContent"></textarea>   
	                    </div>
	                </td>   
	            </tr>
	            <tr>
	                <td colspan="2">
	                    <div class="subTitle">
	                    기부금 사용 예정 내역
	                    </div>
	                </td>
	            </tr>
	            <tr>
	                <td>
	                    <div class="supportContent">
	                        목표 총 금액
	                    </div>
	                </td>
	                <td style="padding-left:13px;">
	                    <input type="number" min="1000000" step="100000" th:value="5000000" name="targetAmount" placeholder="목표 금액 입력"> 원
	                </td>
	            </tr>
	            <tr>
	                <td>
	                    <div class="supportContent" >
	                        예상 사용 목록
	                    </div>
	                </td>
	                <td>
		            	<div class="plusRoute">    	
		                    <input type="text" placeholder="예상 사용 목록 입력" name="supportDetailContent">
		                    <input type="number" placeholder="예상 사용 비 입력" name="supportDetailAmount">
		                    <button id="plusInput" type="button">+</button>
	                    </div>
	                </td>
	            </tr>
	            <tr>
	                <td colspan="2">
	                    <div class="subTitle">상세 정보</div>
	                </td>    
	            </tr>
	            <tr>
	                <td>
	                <div class="supportContent">후원 진행 기간</div>
	                </td>
	                <td>
	                    <input type="date" name="startDate"> 부터 &nbsp;&nbsp; <input type="date" name="endDate"> 까지
	                </td>    
	            </tr>
	            <tr>
	                <td>
	                <div class="supportContent">후원 신청자</div>
	                </td>
	                <td>
	                    <input type="text" placeholder="신청자 이름 or 단체 명 입력" th:value="${session.loginUser.registrar}"> 
	                </td>
	            </tr>
	        </table>
	        </form>
		</div>

        <div>
            <button class="learn-more" id="modal-open">신청하기</button>
            <button class="learn-more" type="button" onclick="supportApplicationListUser.su">취소하기</button>
        </div> 
		
			
    	</section>
		
</section>

</div>


<!-- 모달창 -->
<div class="container"> 
  <div class="popup-wrap" id="popup">
    <div class="popup">
      <div class="popup-head">
          <span class="head-title">선 뜻</span>
      </div>
      <div class="popup-body">
        <div class="body-content">
          <div class="body-titlebox">
          	<img src="image/heart2.png" id="modal-emoticon"><br>
            <h2>신청하시겠습니까?</h2>
          </div>
          <div class="body-contentbox">
            <p> 수정이 불가능하니 한번 더 확인해주세요 </p>
            <p> 모금함 게시에는 다소 시간이 소요될 수 있습니다.</p><br>
          </div>
        </div>
      </div>
      <div class="popup-foot">
        <span class="pop-btn confirm" id="confirm">신청</span>
        <span class="pop-btn confirm" id="close">취소</span>
      </div>
    </div>
</div>
</div>

<script>
$(function(){
	  $("#confirm").click(function(){
	      document.getElementById('supportApply').submit();
	  });
	  $("#modal-open").click(function(){   
	      $("#popup").css('display','flex').hide().fadeIn();
	      //팝업을 flex속성으로 바꿔준 후 hide()로 숨기고 다시 fadeIn()으로 효과
	  });
	  $("#close").click(function(){
	      modalClose(); //모달 닫기 함수 호출
	  });
	  function modalClose(){
	      $("#popup").fadeOut(); //페이드아웃 효과
	  }
	});

</script>











<script>
	window.onload=()=>{
		const plusButton = document.getElementById('plusInput');
		document.getElementById('plusInput').addEventListener('click',function(){
			console.log(123);
			const newList = document.createElement('input');
	 		const newPrice = document.createElement('input');
	 		newList.setAttribute("type", "text");
	 		newList.setAttribute("placeholder", "예상 사용 목록 입력");
	 		newList.setAttribute("name", "supportDetailContent");
	 		newPrice.setAttribute("type", "number");
	 		newPrice.setAttribute("placeholder", "예상 사용 비 입력");
	 		newPrice.setAttribute("name","supportDetailAmount");
	 		console.log(newList);
	 		console.log(newPrice);
			
	 		console.log(plusButton.previousElementSibling)
	 		plusButton.parentElement.append(document.createElement('br'));
	 		console.log(document.createElement('br'));
	 		plusButton.parentElement.append(newList);
	 		plusButton.parentElement.append(newPrice);
// 			this.parentElement.innerHTML += '<br><input type="text" placeholder="예상 사용 목록 입력"> <input type="number" placeholder="예상 사용 비 입력">';
		})
		
		const plusButton2 = document.getElementById('plusInput2');
		document.getElementById('plusInput2').addEventListener('click',function(){
			console.log(123);
			const newPic = document.createElement('input');
	 		newPic.setAttribute("type", "file");
	 		newPic.setAttribute("name", "file");
	 		newPic.setAttribute("class", "supportPic");
			
	 		plusButton2.parentElement.append(document.createElement('br'));
	 		plusButton2.parentElement.append(newPic);
		})
	}	
	
	const selectCates = document.getElementsByClassName('selectCate');
	for(const selectCate of selectCates){
		selectCate.addEventListener('click', function(){
			document.getElementById('dropbtn').innerText = this.innerHTML;
			document.getElementsByName('supportCategory')[0].value= this.innerHTML;
			document.getElementsByClassName('dropdown-content')[0].style.display='none';
		})
	}
	
	document.getElementById('dropbtn').addEventListener('click', ()=>{
		document.getElementsByClassName('dropdown-content')[0].style.display='block';	
	})
</script>

<div th:replace="~{../common/footer :: footer}"></div>
</body>
</html>