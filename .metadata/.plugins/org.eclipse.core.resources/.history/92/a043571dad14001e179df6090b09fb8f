<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>후원리스트</title>
<link href="css/support/supportMain.css" rel="stylesheet">
<link href="css/common/header.css" rel="stylesheet">
<style>
.page {
    margin-top: 45px;
    display: flex;
    flex-direction: row;
    float:none;
}

.pagination > li {
    list-style-type: none;
    float: left;
}

.pagination > li > .num {
    margin: 10px;
    padding: 1px 8px;
    text-decoration-line: none;
    color: black;
    font-size: 15;
}

.pagination > li > .num:hover {
    color: white;
    background-color: #40513B;
    border-radius: 100%;
}

.arrowKey {
    margin-left: 10px;
    margin-right: 10px;
    block-size: 12px;
}

.supportPagination{
	display:flex;
	justify-content:center;
	margin-bottom:30px;
}

.supportListD:hover{
	transform: scale(0.98, 0.98);
	cursor:pointer
}


 #supportProgress {
        width: 60%;
        margin: 0;
        text-align: left;
    }




</style>
</head>
<body>
<div th:replace="~{../common/header :: header}"></div>
<div id="supportMainTitle" align="center">
	<div id="supportTitle">모금함</div>
	
	<div style="width:900px; padding-left:10px">
		<div class="path">
	    	<a class="middle" href="#"><img class="homeIconSize" src="image/home.png"></a>
	        <img class="sub iconSize" src="image/onenext.png">
	        <a class="middle">모금함</a>
	    </div>
    </div>
    
    
    
		<div class="category">
			<table class="cate-table">
		    	<tr>
		        	<td class="margin"></td>
		            <td class="categorys">
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="fa-solid bi bi-grid-fill" viewBox="0 0 16 16">
  							<path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"/>
						</svg><br>
						<a class="category-name">전체</a>
					</td>
		            <td class="categorys">
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="fa-solid bi bi-person-hearts" viewBox="0 0 16 16">
  							<path fill-rule="evenodd" d="M11.5 1.246c.832-.855 2.913.642 0 2.566-2.913-1.924-.832-3.421 0-2.566ZM9 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-9 8c0 1 1 1 1 1h10s1 0 1-1-1-4-6-4-6 3-6 4Zm13.5-8.09c1.387-1.425 4.855 1.07 0 4.277-4.854-3.207-1.387-5.702 0-4.276ZM15 2.165c.555-.57 1.942.428 0 1.711-1.942-1.283-.555-2.281 0-1.71Z"/>
						</svg>
						<br><a class="category-name">사람</a></td>
		            <td class="categorys">
		            	<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="fa-solid bi bi-tencent-qq" viewBox="0 0 16 16" style="margin-left:2px;">
  							<path d="M6.048 3.323c.022.277-.13.523-.338.55-.21.026-.397-.176-.419-.453-.022-.277.13-.523.338-.55.21-.026.397.176.42.453Zm2.265-.24c-.603-.146-.894.256-.936.333-.027.048-.008.117.037.15.045.035.092.025.119-.003.361-.39.751-.172.829-.129l.011.007c.053.024.147.028.193-.098.023-.063.017-.11-.006-.142-.016-.023-.089-.08-.247-.118Z"/>
  							<path d="M11.727 6.719c0-.022.01-.375.01-.557 0-3.07-1.45-6.156-5.015-6.156-3.564 0-5.014 3.086-5.014 6.156 0 .182.01.535.01.557l-.72 1.795a25.85 25.85 0 0 0-.534 1.508c-.68 2.187-.46 3.093-.292 3.113.36.044 1.401-1.647 1.401-1.647 0 .979.504 2.256 1.594 3.179-.408.126-.907.319-1.228.556-.29.213-.253.43-.201.518.228.386 3.92.246 4.985.126 1.065.12 4.756.26 4.984-.126.052-.088.088-.305-.2-.518-.322-.237-.822-.43-1.23-.557 1.09-.922 1.594-2.2 1.594-3.178 0 0 1.041 1.69 1.401 1.647.168-.02.388-.926-.292-3.113a25.78 25.78 0 0 0-.534-1.508l-.72-1.795ZM9.773 5.53a.095.095 0 0 1-.009.096c-.109.159-1.554.943-3.033.943h-.017c-1.48 0-2.925-.784-3.034-.943a.098.098 0 0 1-.018-.055c0-.015.004-.028.01-.04.13-.287 1.43-.606 3.042-.606h.017c1.611 0 2.912.319 3.042.605Zm-4.32-.989c-.483.022-.896-.529-.922-1.229-.026-.7.344-1.286.828-1.308.483-.022.896.529.922 1.23.027.7-.344 1.286-.827 1.307Zm2.538 0c-.484-.022-.854-.607-.828-1.308.027-.7.44-1.25.923-1.23.483.023.853.608.827 1.309-.026.7-.439 1.251-.922 1.23ZM2.928 8.99c.213.042.426.081.639.117v2.336s1.104.222 2.21.068V9.363c.326.018.64.026.937.023h.017c1.117.013 2.474-.136 3.786-.396.097.622.151 1.386.097 2.284-.146 2.45-1.6 3.99-3.846 4.012h-.091c-2.245-.023-3.7-1.562-3.846-4.011-.054-.9 0-1.663.097-2.285Z"/>
						</svg>
		            	<br><a class="category-name">동물</a>
		            </td>
		            <td class="categorys">
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="fa-solid bi bi-tree-fill" viewBox="0 0 16 16">
  							<path d="M8.416.223a.5.5 0 0 0-.832 0l-3 4.5A.5.5 0 0 0 5 5.5h.098L3.076 8.735A.5.5 0 0 0 3.5 9.5h.191l-1.638 3.276a.5.5 0 0 0 .447.724H7V16h2v-2.5h4.5a.5.5 0 0 0 .447-.724L12.31 9.5h.191a.5.5 0 0 0 .424-.765L10.902 5.5H11a.5.5 0 0 0 .416-.777l-3-4.5z"/>
						</svg>
						<br><a class="category-name">환경</a>
					</td>		            
		            <td class="categorys">
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="fa-solid bi bi-three-dots" viewBox="0 0 16 16">
  							<path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
						</svg>
						<br><a class="category-name">기타</a>
					</td>
		            <td class="margin"></td>
		        </tr>
		    </table>
		    <th:block th:if="${category == null}">
		    	<input name="category" class="categoryInput" type="hidden" value="none">
		    </th:block>
		    <th:block th:if="${category != null}">
		    	<input name="category" class="categoryInput" type="hidden" th:value="${category}">
		    </th:block>
		</div>
	<br>
	<script>
		const cateTds = document.getElementsByClassName('categorys')
		for(const cateTd of cateTds){
			cateTd.addEventListener('click', function(){
				const category = this.querySelector('.category-name').innerText;
				location.href="mainCategory.su?category=" + category
			})
		}
	</script>
	<script th:inline="javascript">
		window.onload = ()=>{
			/*<![CDATA[*/
				const category = /*[[${category}]]*/'category';	
			/*]]*/
			if(category != null){
				const categoryNames = document.querySelectorAll('.category-name')
				for(const categoryName of categoryNames){
					if(categoryName.innerText == category){				
						categoryName.parentElement.style.backgroundColor='#EDF1D6';
						categoryName.parentElement.querySelector('.fa-solid').style.color='#40513B';
						categoryName.style.color='#40513B'
					}
				}
			} else{
				const total = document.querySelector('.category-name')
				total.parentElement.style.backgroundColor='#EDF1D6';
				total.parentElement.querySelector('.fa-solid').style.color='#40513B';
				total.style.color='#40513B'
			}
		}
	</script>
    
    
    <!-- 후원 리스트  -->
	<div class="supportLists">
	<div class="actionArea">
    	<div class="searchArea">
        	<input class="searchInput" type="text" placeholder="제목으로 검색"/>
            <a class="searchIconATag" href="#"><img class="searchIcon" src="image/search.png"></a>
        </div>
    </div>
    
    <script th:inline="javascript">
    	
    	document.querySelector('.searchIcon').addEventListener('click', ()=>{
    		const searchWord = document.querySelector('.searchInput').value;
    		const category = document.querySelector('.categoryInput').value;
    		
    		if(category=='none'){
				const searchWord = document.getElementsByClassName('searchInput')[0].value
				location.href="mainSearch.su?searchWord="+searchWord;
			} else{
				const searchWord = document.getElementsByClassName('searchInput')[0].value
				location.href="mainCategory.su?searchWord=" + searchWord + "&category="+category;
			}
    		
    		
    	})
    	
    	document.addEventListener('keyup', function(event){
    		if(event.key =='Enter'){
    			document.getElementsByClassName('seachIcon')[0].click();
    		}
    	})
    </script>
    <br clear="both">
		<div class="supportList" id="supportInfo">
			
			
			
			
			<table class="supportTotal">
				<tr>
					<td style="padding-top:30px;">
						<div class="todayButton">today</div>
					</td>
				</tr>
				<tr>
					<td>
						오늘 함께한 기부금
					</td>				
				</tr>
				<tr>
					<td>
						<hr>
					</td>
				</tr>
				<tr>
					<td>
						[[${totalCount}]]명이<br>
						총 
						<script th:inline="javascript">
						        /*<![CDATA[*/
		                    	var amount = /*[[${totalAmount}]]*/'0'; // 숫자 변수
						        var formattedAmount = amount.toLocaleString(); // 원하는 형식으로 포맷
						        document.write(formattedAmount + '원'); // 포맷된 값을 출력
						        /*]]*/
				    	</script>을 <br>
						기부하였습니다.
					</td>
				</tr>
			</table>
		</div>
			<th:block th:each="s:${ sList }">
			<div class="supportList supportListD" th:onclick="location.href='supportDetail.su?supportNo=[[${s.supportNo}]]'">
				<div>
					<img class="supportThumnails" th:src="@{${s.imageUrl}}">
				</div>
				<div class="supportName">[[${s.supportTitle}]]</div>
				<div class="supportGroup">[[${s.registar}]]</div>
				<progress id="supportProgress" th:value="${s.fundAmount*100/s.targetAmount}" min="0" max="100" style="margin-bottom:17px;"></progress>
				<span class="supportPercent">[[${(s.fundAmount*100/s.targetAmount)}]]%</span> 
			</div>
			</th:block>
	</div>
</div>
<br clear="both">
<div class="supportPagination">
	<div class="page" th:with="loc=${#ctx.springRequestContext.requestUri}">
            <ul class="pagination">
                <li th:if="${ pi.currentPage > 1 }">
	                <a class="first" th:href="@{${loc}(page=${ pi.currentPage -1 })}">
	                	<img class="arrowKey" src="image/before.png">
	                </a>
                </li>
                <li th:unless="${ pi.currentPage > 1 }">
	                	<img class="arrowKey disabled" src="image/before.png">
                </li>
                <li th:each="p : ${ #numbers.sequence(pi.startPage, pi.endPage)}">
                	<th:block th:if="${p != 0}">
                	<a th:href="@{${loc}(page=${p})}" th:text="${p}"
                		th:class="${p == pi.currentPage} ? 'num currentPage' : 'num'"></a>
                	</th:block>
                </li>
                <li th:if="${ pi.currentPage < pi.maxPage} ">
	                <a class="last" th:href="@{${loc}(page=${ pi.currentPage + 1 })}">
	                	<img class="arrowKey" src="image/next.png">
	                </a>
                </li>
                <li th:unless="${ pi.currentPage < pi.maxPage }">
	                	<img class="arrowKey disabled" src="image/next.png">
                </li>
            </ul>
        </div>
</div> 
<div th:replace="~{../common/footer :: footer}"></div>
</body>
</html>